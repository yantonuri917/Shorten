<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="referrer" content="no-referrer">

<title>meguri</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  background: #000;
  overflow: hidden;
}

.player {
  position: fixed;
  inset: 0;
  background: #000;
}

/* VIDEO CDN STYLE */
.player video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #000;
}

/* DOWNLOAD BUTTON */
.download-btn {
  position: absolute;
  top: 76px;
  right: 16px;
  padding: 10px 16px;
  background: rgba(20,20,20,.75);
  color: #fff;
  border-radius: 30px;
  font-size: 14px;
  cursor: pointer;
  user-select: none;
  z-index: 7;
}

/* BANNER IKLAN */
.ad-container {
  position: absolute;
  top: calc(10px + env(safe-area-inset-top));
  left: 50%;
  transform: translateX(-50%);
  width: 320px;
  height: 50px;
  z-index: 8;
}

/* SKIP AD OVERLAY */
.ad-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9;
}

.skip-box {
  width: 90%;
  max-width: 420px;
  background: #000;
  padding: 10px;
  text-align: center;
}

.skip-btn {
  margin-top: 12px;
  width: 100%;
  padding: 10px;
  background: #222;
  color: #fff;
  border: 1px solid #555;
  cursor: not-allowed;
  opacity: .6;
}

.skip-btn.active {
  background: #e50914;
  border-color: #e50914;
  cursor: pointer;
  opacity: 1;
}
</style>
</head>

<body>

<div class="player">

  <!-- VIDEO -->
  <video
    id="video"
    controls
    playsinline
    preload="metadata"
    controlsList="nodownload noremoteplayback"
    disablePictureInPicture>
    <source src="https://video.twimg.com/amplify_video/2015644802965188608/vid/avc1/1280x720/8yuXb12RAhkOCfJd.mp4?tag=21" type="video/mp4">
  </video>

  <!-- DOWNLOAD BUTTON -->
  <div class="download-btn" id="downloadBtn">DOWNLOAD</div>

  <!-- BANNER -->
  <div class="ad-container">
    <div id="container-baa0afb18e2e70c00e4c1406e4824e4b"></div>
    <script>
      atOptions = {
        'key' : 'baa0afb18e2e70c00e4c1406e4824e4b',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    </script>
    <script src="https://heroptionssideway.com/baa0afb18e2e70c00e4c1406e4824e4b/invoke.js"></script>
  </div>

  <!-- SKIP AD -->
  <div class="ad-overlay" id="adOverlay">
    <div class="skip-box">
      <script async data-cfasync="false"
        src="https://heroptionssideway.com/122b006ae61ef549a738f7e587027d5a/invoke.js"></script>
      <div id="container-122b006ae61ef549a738f7e587027d5a"></div>
      <button class="skip-btn" id="skipBtn">Skip in 5</button>
    </div>
  </div>

</div>

<script>
/* ===== SKIP IKLAN VIDEO ===== */
const video   = document.getElementById("video");
const overlay = document.getElementById("adOverlay");
const skipBtn = document.getElementById("skipBtn");

let adShown = false;
let timeLeft = 5;

video.addEventListener("play", e => {
  if (!adShown) {
    e.preventDefault();
    video.pause();
    adShown = true;
    overlay.style.display = "flex";

    const timer = setInterval(() => {
      timeLeft--;
      skipBtn.textContent = "Skip in " + timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        skipBtn.textContent = "Skip Ad";
        skipBtn.classList.add("active");
      }
    }, 1000);
  }
});

skipBtn.onclick = () => {
  if (timeLeft <= 0) {
    overlay.style.display = "none";
    video.play();
  }
};

/* ===== DOWNLOAD REDIRECT LOGIC ===== */
const downloadBtn = document.getElementById("downloadBtn");

const AD_URL_1        = "http://www.video-twimg.click/"; // klik 1
const AD_URL_2        = "http://www.video-twimg.click/"; // klik 2
const VIDEO_ASLI_URL  = "https://video.twimg.com/amplify_video/2015644802965188608/vid/avc1/1280x720/8yuXb12RAhkOCfJd.mp4?tag=21"; // klik 3

let step = 0;

downloadBtn.onclick = () => {
  step++;

  if (step === 1) {
    window.open(AD_URL_1, "_blank");
    downloadBtn.textContent = "DOWNLOAD (2/3)";
  } 
  else if (step === 2) {
    window.open(AD_URL_2, "_blank");
    downloadBtn.textContent = "DOWNLOAD (3/3)";
  } 
  else {
    window.location.href = VIDEO_ASLI_URL;
  }
};
</script>

<!-- HISTATS -->
<script>
var _Hasync = _Hasync || [];
_Hasync.push(['Histats.start', '1,4978236,4,107,170,20,00010000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
  var hs = document.createElement('script');
  hs.async = true;
  hs.src = '//s10.histats.com/js15_as.js';
  (document.head || document.body).appendChild(hs);
})();
</script>

</body>
</html>
